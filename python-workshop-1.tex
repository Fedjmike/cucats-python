\documentclass[notes]{beamer}

\usepackage{listings}
\usepackage{color}
\usepackage{etoolbox}

\definecolor{orange}{rgb}{1,0.5,0}
\definecolor{green}{rgb}{0,0.5,0}
\definecolor{gray}{rgb}{0.25,0.25,0.25}
\definecolor{mauve}{rgb}{0.58,0,0.82}
\definecolor{red}{rgb}{1.0,0,0}

\colorlet{punct}{green}
\colorlet{delim}{green}
\colorlet{num}{mauve}

\definecolor{codebg}{rgb}{1.0,1.0,0.8}
\definecolor{jargonbg}{rgb}{0.8,1.0,0.8}

\newtoggle{InString}{}% Keep track of if we are within a string
\togglefalse{InString}% Assume not initally in string

\newcommand*{\ColorIfNotInString}[1]{\iftoggle{InString}{#1}{\color{num}#1}}
\newcommand*{\ProcessQuote}[1]{\color{red}#1\iftoggle{InString}{\global\togglefalse{InString}}{\global\toggletrue{InString}}}

\lstdefinelanguage{py}{
	morekeywords={if,elif,else,for,in,def,class,True,False,print},
	morecomment=[l]\#,
	literate=
	*{=}{{{\color{punct}{=}}}}{1}
	{|}{{{\color{punct}{|}}}}{1}
	{\^}{{{\color{punct}{\^{}}}}}{1}
	{\{}{{{\color{punct}{\{}}}}{1}
	{\}}{{{\color{punct}{\}}}}}{1}
	{[}{{{\color{punct}{[}}}}{1}
	{]}{{{\color{punct}{]}}}}{1}
	{)}{{{\color{punct}{)}}}}{1}
	{(}{{{\color{punct}{(}}}}{1}
	{<}{{{\color{punct}{<}}}}{1}
	{>}{{{\color{punct}{>}}}}{1}
	{*}{{{\color{punct}{*}}}}{1}
	{?}{{{\color{punct}{?}}}}{1}
	{:}{{{\color{punct}{:}}}}{1}
	{,}{{{\color{punct}{,}}}}{1}
	{\&}{{{\color{punct}{\&}}}}{1}
	{!}{{{\color{punct}{!}}}}{1}
	{-}{{{\color{punct}{-}}}}{1}
	{+}{{{\color{punct}{+}}}}{1}
	{.}{{{\color{punct}{.}}}}{1}
	{\%}{{{\color{punct}{\%}}}}{1}
	{/}{{{\color{punct}{/}}}}{1}
	{\~}{{{$\color{punct}{\sim}$}}}{1}
	{;}{{{\color{punct}{;}}}}{1}
	%{"}{{{\ProcessQuote{"}}}}1% Disable coloring within double quotes
	%{'}{{{\ProcessQuote{'}}}}1% Disable coloring within single quote
	{0}{{{\ColorIfNotInString{0}}}}1
	{1}{{{\ColorIfNotInString{1}}}}1
	{2}{{{\ColorIfNotInString{2}}}}1
	{3}{{{\ColorIfNotInString{3}}}}1
	{4}{{{\ColorIfNotInString{4}}}}1
	{5}{{{\ColorIfNotInString{5}}}}1
	{6}{{{\ColorIfNotInString{6}}}}1
	{7}{{{\ColorIfNotInString{7}}}}1
	{8}{{{\ColorIfNotInString{8}}}}1
	{9}{{{\ColorIfNotInString{9}}}}1,
}

\lstset{
	language=py,
	%
	captionpos=b,					% sets the caption-position to bottom
	mathescape=true,
	keepspaces=true,
	showspaces=false,
	showstringspaces=false,	  	% underline spaces within strings only
	showtabs=false,			  	% show tabs within strings adding particular underscores
	stepnumber=1,
	tabsize=4,
	title=\lstname,
	morestring=[b]",
	%
	numberstyle=\footnotesize\color{gray},
	rulecolor=\color{black},
	basicstyle=\ttfamily\small,
	backgroundcolor=\color{codebg},
	keywordstyle=\color{blue},
	commentstyle=\color{orange},
	stringstyle=\color{red},
}

\lstdefinestyle{output}{
	basicstyle=\small\ttfamily,
	numbers=none,
	frame=tblr,
	columns=fullflexible,
	backgroundcolor=\color{blue!10},
	linewidth=0.9\linewidth,
	xleftmargin=0.1\linewidth
}

\title{CUCaTS Python Workshop}
\date{Lent 2015}

\begin{document}
	
	\begin{frame}[fragile]
		\maketitle
	\end{frame}
	
	\begin{frame}[fragile]
		\begin{quotation}
			Literacy is a bridge from misery to hope. It is a tool for daily life in modern society. It is a bulwark against poverty, and a building block of development, an essential complement to investments in roads, dams, clinics and factories. Literacy is a platform for democratization, and a vehicle for the promotion of cultural and national identity. Especially for girls and women, it is an agent of family health and nutrition. For everyone, everywhere, literacy is, along with education in general, a basic human right\dots Literacy is, finally, the road to human progress and the means through which every man, woman and child can realize his or her full potential.
		\end{quotation}
		\hfill  -- Kofi Annan
	\end{frame}
	
	\begin{frame}[fragile]
		\frametitle{What is Python?}
		\begin{itemize}
			\item Python is a language: a set of rules for constructing programs.
			\pause
			\item Experiment using the interpreter. Type \lstinline|python| into a command prompt to launch.
			\begin{lstlisting}
			Python 3.4.2 (default, Dec 27 2014, 13:16:08)
			[GCC 4.9.2] on linux
			Type "help", "copyright", "credits" or "licen
			>>>
			\end{lstlisting}
			\note<2>{When you open the interpreter, you can type things in and press enter to have it read what you wrote.}
			\pause
			\item Talk to the interpreter in Python.
			\note<4>{When you type things in, you should write in Python. The interpreter will complain if you don't.}
			\pause
			\item Changes here aren't permanent. Can close and start again.
			\note<5>{Things you do in the interpreter aren't permanent. You can always close the window and open it afresh.
				
				As we introduce new ideas today, you can follow along by typing things into the interpreter.}
		\end{itemize}
	\end{frame}
	
	\begin{frame}[fragile]
		\frametitle{Values}
		
		\begin{itemize}
			\item A program processes data.
			\item Data such as numbers, text, images, dates/time, sound, files and so on.
			\item Even complex and abstract things like a road network or the structure of a protein.
			\item A value is a piece of data stored in a computer's memory.
		\end{itemize}
	\end{frame}
	
	\begin{frame}[fragile]
		\frametitle{Datatypes}
		
		All values have a datatype. Some examples:
		
		\begin{itemize}
			\item Numbers (integers, floats) \\
			e.g. \colorbox{codebg}{\lstinline|5|} or \colorbox{codebg}{\lstinline|9.6|}
			\note<1>{Integers can hold whole numbers only. ``Floats", or floating-point numbers, are capable of fractional numbers as well. \\}
			
			\pause
			
			\item Strings \\
			\colorbox{codebg}{\lstinline|"Hello world!"|}
			\note<3>{Strings can use single quotes or double quotes, but we will stick to double quotes for consistency. \\}
			
			\pause
			
			\item Booleans \\
			\colorbox{codebg}{\lstinline|True|} and \colorbox{codebg}{\lstinline|False|}
			\note<2>{True/false values are called ``Booleans" (after George Boole). They are used for expression conditions.}
			
			\pause
			
			\item Lists \\
			\colorbox{codebg}{\lstinline|[4, 8, 15, 16, 23, 42]|} \\
			or \colorbox{codebg}{\lstinline|["first", "second", "fourth"]|} \\
			or even \colorbox{codebg}{\lstinline|[[], "some text", 99]|}
			\note<4>{Lists hold a sequence of values. The third example is a list containing firstly an empty list, then a string and then an integer. As you can see, the elements of a list do not have to all be the same datatype. In Python, a list is simply a list, not a list \emph{of} something. \\}
			
			%\pause
			
			%\item Dictionaries
			% bother explaining them this early?
			
			% I'm thinking, don't mention tuples because it will be difficult to explain how they differ from lists
			
		\end{itemize}
	\end{frame}
	
	\begin{frame}[fragile]
		\frametitle{}
		
		Arithmetic:
		
		\begin{lstlisting}
		>>> 5 + 9
		14$\pause$
		>>> 7.5 * 2
		15.0
		\end{lstlisting}
		\note<2>{Explain REPL. Note that the multiplication results in \lstinline|15.0|, a float, because \lstinline|7.5| was a float.}
		
		\pause
		
		Comparisons:
		
		\begin{lstlisting}
		>>> 5 < 6
		False
		>>> 9 == 18 / 2
		True
		\end{lstlisting}
		
		\pause
		
		\begin{lstlisting}
		>>> "two" + "strings"
		"twostrings" 
		\end{lstlisting}
	\end{frame}
	
	\begin{frame}[fragile]
		\frametitle{Try it out}
		
		\begin{lstlisting}
		>>> "a" + "b"
		>>> "test" + "ing" == "testing"
		>>> 3 == "3"
		>>> "a" < "b"
		>>> "Na"*8 + " batman"
		\end{lstlisting}
		% Some basic operations on values
		% indexing, appending lists (needed in coming slides)
		% print
		% REPL
	\end{frame}
	
	\begin{frame}[fragile]
		\frametitle{Variables}
		\begin{itemize}
			\item Variables are labels put onto values. They allow us to refer to those values by a name.
			% NOT BOXES BECAUSE REFERENCE SEMANTICS
			\note<1>{Variable names must consist only of letters, digits and underscores. They can't start with a digit or have spaces. They are case sensitive, i.e.}
		\end{itemize}
		
		\begin{onlyenv}<1-2>
			\begin{lstlisting}
			>>> x = 5
			>>> y = x+6
			>>> print(y)
			11
			\end{lstlisting}
		\end{onlyenv}
		
		\pause
		
		\begin{itemize}
			\item They can be reassigned:
		\end{itemize}
		
		\begin{lstlisting}
		>>> x = 5
		>>> x = 7
		>>> print(x)
		7
		\end{lstlisting}
		
		%\begin{itemize} \item Assignment does not create a new value: \end{itemize}%
		% save for later? allows delaying explaining list += list
		
	\end{frame}
	
	\begin{frame}[fragile]
		\frametitle{Accessing elements in lists}
		
		\begin{lstlisting}
		>>> days = ["Mon", "Tue", "Wed", "Thu",
		...	 	"Fri", "Sat", "Sun"]
		>>> days[1]
		\end{lstlisting}
		\note<1>{Let's make a list. To get items from the list, we use square brackets. What happens if we ask for the first element?}
		\pause
		What do you get?
		\\
		\note<2>{Try it out.}
		\pause
		\begin{lstlisting}
		'Tue'
		\end{lstlisting}
		\note<3>{Tuesday? Why not Monday?}
		\pause
		\begin{lstlisting}
		>>> days[0] == "Mon"
		True
		\end{lstlisting}
		\note<4>{It's because indices start with zero in Python.}
		\pause
		\begin{lstlisting}
		>>> days[-1]
		'Sun'
		\end{lstlisting}
		\note<5>{We can also index into lists with negative numbers, to work backwards from the end of the list.}
	\end{frame}
	
	\begin{frame}[fragile]
		\frametitle{Errors}
		
		\begin{itemize}
			\item There are rules governing what you can't do with certain types and values.
			\pause For example:
			\begin{itemize}
				\item Adding an integer to a string.
				\begin{onlyenv}<2>
					\begin{lstlisting}
					>>> 16 + "hello"
					$\textrm{\color{red}TypeError: unsupported operand type(s) for +: `int' and `str'}$
					\end{lstlisting}
				\end{onlyenv}
				
				\pause
				
				\item Indexing into something that is not a sequence.
				\begin{onlyenv}<3>
					\begin{lstlisting}
					>>> 9.0[1]
					$\textrm{\color{red}TypeError: `float' object has no attribute `\_\_getitem\_\_'}$
					\end{lstlisting}
				\end{onlyenv}
				
				\pause
				
				\item Asking for the sixth element of a list that only has four.
				\begin{onlyenv}<4>
					\begin{lstlisting}
					>>> [4, 5, 6, 7][5]
					$\textrm{\color{red}IndexError: list index out of range}$
					\end{lstlisting}
				\end{onlyenv}
				
				\pause
			\end{itemize}
			\item Designed to help you spots problems with your code.
		\end{itemize}
	\end{frame}
	
	\begin{frame}[fragile]
		\frametitle{Try it out}
		
		\begin{lstlisting}
		>>> "this is a string" + 2
		>>> "this is a string" - "string"
		>>> 5/0
		
		>>> list = [1, 2, 3]
		>>> list[1.0]
		\end{lstlisting}
	\end{frame}
	
	\begin{frame}[fragile]
		\frametitle{`for' loops}
		
		\begin{columns}[c]
			\column{.7\textwidth}
			\begin{lstlisting}
			>>> nums = [1, 2, 3, 4, 5]
			>>> total = 0
			>>> for x in nums:
			... 	total = total + x
			$\note<1>{The line `for x in nums' followed by the colon opens up a new block of code, which has to be indented. Everything in the block gets executed for each x in nums. To indent, use four spaces! You can put multiple lines in a block, and they must each be indented.}
			\pause$
			>>> print(total)
			15
			\end{lstlisting}
			
			\column{.2\textwidth}
			\pause
			\begin{tabular}{l | r}
				\lstinline|x| & \lstinline|total| \\
				\, & 0 \\ \pause
				1 & 1 \\ \pause
				2 & 3 \\ \pause
				3 & 6 \\ \pause
				4 & 10 \\ \pause
				5 & 15 \\
			\end{tabular}
		\end{columns}
		
		% step by step on the side of the running total
		
		% whitespace...
	\end{frame}
	
	\begin{frame}[fragile]
		\frametitle{Processing lists}
		
		\begin{onlyenv}<1>
			\begin{lstlisting}
			>>> nums = [1, 2, 3, 4, 5]
			>>> squares = [1, 4, 9, 16, 25]
			\end{lstlisting}
			
			~ \\
			~ \\
			
		\end{onlyenv}
		
		\pause
		
		\begin{onlyenv}<2->
			\begin{lstlisting}
			>>> nums = [1, 2, 3, 4, 5]
			>>> squares = [x*x for x in nums]$\pause$
			>>> print(squares)
			[1, 4, 9, 16, 25]
			\end{lstlisting}
		\end{onlyenv}
		
		\pause
		
		\begin{itemize}
			\item Creates a new list out of another by using each element to create a corresponding new value.
			\item `\lstinline|for|' and `\lstinline|in|' are keywords.
			\note<3->{Keywords are ones that have a special meaning. You cannot use them as variable names. List comprehensions must use `\lstinline|for|' and `\lstinline|in|'}
			\item This is called a \colorbox{jargonbg}{list comprehension}.
		\end{itemize}
	\end{frame}
	
	
	\begin{frame}[fragile]
		\frametitle{if-else}
		
		Provide two different pieces of code to run depending on some condition.\\
		\pause
		A condition is an expression which when evaluated, returns either `\lstinline|True|' or `\lstinline|False|'.
		
		% explain in the context of for loops, because otherwise the condition is going to be tautological and it won't be clear why providing a branch is useful
		% which is why if comes after for
		\pause  
		\begin{lstlisting}
		if MY_CONDITION:
		# Perform computation if
		# MY_CONDITION evaluates
		# to True.
		else:
		# Perform computation if
		# MY_CONDITION evaluates
		# to False.
		\end{lstlisting}
	\end{frame}
	
	\begin{frame}[fragile]
		\frametitle{if-else examples}
		
		Let's write some code to go through a bunch of values in a list and output whether or not they are even or odd.
		
		\pause
		\begin{lstlisting}
		numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
		
		for x in numbers:
		if (x % 2) == 0:
		print(x, "is even.")
		else:
		print(x, "is odd.")
		\end{lstlisting}
		\pause
		Try it out!
	\end{frame}
	
	\begin{frame}[fragile]
		\frametitle{Functions}
		A function is a piece of code that can take an input value, processes it and gives back an output. The syntax for writing a function is simple:
		\begin{lstlisting}
		def sum(numbers):
		total = 0
		for x in numbers:
		total = total + x
		return total
		
		y = sum([1, 2, 3, 4, 5])
		# The value of y is now 15.
		\end{lstlisting}
		{\tt output} is the value you'd like to have after having performed your computation on {\tt input}.
	\end{frame}
	
	\begin{frame}[fragile]
		\frametitle{Functions}
		Functions can also take multiple values as inputs:
		\begin{lstlisting}
		def add(num1, num2):
		sum = num1 + num2
		return sum
		
		def mult(num1, num2):
		product = num1 * num2
		return product
		
		x = add(4,3)
		y = mult(6,5)
		# The value of x is now 7.
		# The value of y is now 30.
		\end{lstlisting}
	\end{frame}
	
	\begin{frame}[fragile]
		\frametitle{Making a program: writing Python code in a file}
		We have been using the interpreter. There is another way to use Python.
		\begin{itemize}
			\item We can save some Python commands in a file and then invoke the interpreter on the file.
			\pause
			\item Write \lstinline|print("Hello!")| in a file using a text editor (say, Notepad) and save it somewhere under the name \lstinline|my_python_script.py|.
			\item Note the \lstinline|.py| extension!
			\pause
			\item Open a command prompt at the folder where you saved the script and type in the name of your script (\lstinline|my_python_script.py|).
			\item The computer should respond: \lstinline|Hello!|
		\end{itemize}
		
	\end{frame}
	
\end{document}
