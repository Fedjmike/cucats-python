\documentclass[12pt,twocolumn]{article}

\usepackage[pdftex]{graphicx}

\usepackage{listings}
\usepackage{color}
\usepackage{etoolbox}

\usepackage{amsmath}
\usepackage{xcolor}
\usepackage[margin=1in]{geometry}

\pagenumbering{gobble}

\setlength{\columnsep}{30pt}

\setlength{\parindent}{0pt}

\definecolor{orange}{rgb}{1,0.5,0}
\definecolor{green}{rgb}{0,0.5,0}
\definecolor{gray}{rgb}{0.25,0.25,0.25}
\definecolor{mauve}{rgb}{0.58,0,0.82}
\definecolor{red}{rgb}{1.0,0,0}

\colorlet{punct}{green}
\colorlet{delim}{green}
\colorlet{num}{mauve}

\definecolor{codebg}{rgb}{1.0,1.0,0.8}
\definecolor{jargonbg}{rgb}{0.8,1.0,0.8}
\definecolor{spacebg}{rgb}{1.0,0.8,0.0}
\definecolor{lightspacebg}{rgb}{1.0,0.9,0.5}

\newtoggle{InString}{}% Keep track of if we are within a string
\togglefalse{InString}% Assume not initally in string

\newcommand*{\ColorIfNotInString}[1]{\iftoggle{InString}{#1}{\color{num}#1}}
\newcommand*{\ProcessQuote}[1]{\color{red}#1\iftoggle{InString}{\global\togglefalse{InString}}{\global\toggletrue{InString}}}

\lstdefinelanguage{py}{
	morekeywords={if,elif,else,for,in,def,class,True,False,print,return,and,or,not,with,None},
	literate=
		*{=}{{{\color{punct}{=}}}}{1}
		{|}{{{\color{punct}{|}}}}{1}
		{\^}{{{\color{punct}{\^{}}}}}{1}
		{\{}{{{\color{punct}{\{}}}}{1}
		{\}}{{{\color{punct}{\}}}}}{1}
		{[}{{{\color{punct}{[}}}}{1}
		{]}{{{\color{punct}{]}}}}{1}
		{)}{{{\color{punct}{)}}}}{1}
		{(}{{{\color{punct}{(}}}}{1}
		{<}{{{\color{punct}{<}}}}{1}
		{>}{{{\color{punct}{>}}}}{1}
		{*}{{{\color{punct}{*}}}}{1}
		{?}{{{\color{punct}{?}}}}{1}
		{:}{{{\color{punct}{:}}}}{1}
		{,}{{{\color{punct}{,}}}}{1}
		{\&}{{{\color{punct}{\&}}}}{1}
		{!}{{{\color{punct}{!}}}}{1}
		{-}{{{\color{punct}{-}}}}{1}
		{+}{{{\color{punct}{+}}}}{1}
		{.}{{{\color{punct}{.}}}}{1}
		{\%}{{{\color{punct}{\%}}}}{1}
		{/}{{{\color{punct}{/}}}}{1}
		{\~}{{{$\color{punct}{\sim}$}}}{1}
		{;}{{{\color{punct}{;}}}}{1}
		%{"}{{{\ProcessQuote{"}}}}1% Disable coloring within double quotes
		%{'}{{{\ProcessQuote{'}}}}1% Disable coloring within single quote
		{0}{{{\ColorIfNotInString{0}}}}1
		{1}{{{\ColorIfNotInString{1}}}}1
		{2}{{{\ColorIfNotInString{2}}}}1
		{3}{{{\ColorIfNotInString{3}}}}1
		{4}{{{\ColorIfNotInString{4}}}}1
		{5}{{{\ColorIfNotInString{5}}}}1
		{6}{{{\ColorIfNotInString{6}}}}1
		{7}{{{\ColorIfNotInString{7}}}}1
		{8}{{{\ColorIfNotInString{8}}}}1
		{9}{{{\ColorIfNotInString{9}}}}1,
}

\lstset{
	language=py,
	%
	captionpos=b,                    % sets the caption-position to bottom
	mathescape=true,
	keepspaces=true,
	showspaces=false,
	showstringspaces=false,          % underline spaces within strings only
	showtabs=false,                  % show tabs within strings adding particular underscores
	stepnumber=1,
	tabsize=4,
	title=\lstname,
	morestring=[b]",
	morestring=[b]',
	belowskip=-0.8 \baselineskip,
	%
	numberstyle=\footnotesize\color{gray},
	rulecolor=\color{black},
	basicstyle=\ttfamily\small,
	commentstyle=\itshape,
	backgroundcolor=\color{codebg},
	keywordstyle=\color{blue},
	commentstyle=\color{orange}\itshape,
	stringstyle=\color{red},
}

\lstdefinestyle{output}{
	basicstyle=\small\ttfamily,
	numbers=none,
	frame=tblr,
	columns=fullflexible,
	backgroundcolor=\color{blue!10},
	linewidth=0.9\linewidth,
	xleftmargin=0.1\linewidth
}

\title{CUCaTS Python Cheatsheet}
\date{}

\begin{document}
	\maketitle
	
	\vspace*{-1cm}
	
	\begin{tabular}{l l}
		\textbf{Datatype} & \textbf{Example} \\

		Integers &
		\colorbox{codebg}{\lstinline|5|} \\
		
		Floats &
		\colorbox{codebg}{\lstinline|9.6|} \\
		
		Booleans &
		\colorbox{codebg}{\lstinline|True|} and \colorbox{codebg}{\lstinline|False|} \\
		
		Strings &
		\colorbox{codebg}{\lstinline|"Hello world!"|} \\
		
		Lists &
		\colorbox{codebg}{\lstinline|[4, 8, 15, 16, 23, 42]|} \vspace{0.5mm} \\
		\, &
		\colorbox{codebg}{\lstinline|["first", "second"]|} \vspace{0.5mm} \\
		\, &
		\colorbox{codebg}{\lstinline|[[], "some text", 99]|} \vspace{0.5mm} \\
		
		Dictionaries &
		\colorbox{codebg}{\lstinline|\{"Alice": 42, "Bob": 40\}|}
	\end{tabular}
	
	\subsubsection*{Operations}
	
	\begin{tabular}{r l}
		\lstinline|+|, \lstinline|-|, \lstinline|*|, \lstinline|/|, \lstinline|%| &
		(on integers or floats) \\
	
		\lstinline|+| & (to join strings or lists) \\
	
		\lstinline|==|, \lstinline|!=| & (comparing any values) \\
	
		\lstinline|>|, \lstinline|>=|, \lstinline|<|, \lstinline|<=| &
		(comparing integers or floats) \\
		
		\lstinline|and|, \lstinline|or|, \lstinline|not| & (on booleans)
	\end{tabular}
	
	\subsubsection*{Variables}
	
	Labels onto values. Their names must consist only of letters, digits and underscores. They can't start with a digit or have spaces. They are case sensitive.
	
	\subsubsection*{Control flow}
	
	\colorbox{codebg}{\lstinline|for $\ \colorbox{spacebg}{\quad}$ in $\ \colorbox{spacebg}{\quad}$:|} \\
	
	\colorbox{codebg}{\lstinline|if $\ \colorbox{spacebg}{\quad}$:|}
	\vspace{1mm}
	
	\colorbox{codebg}{\lstinline|elif $\ \colorbox{spacebg}{\quad}$:|}
	\vspace{1mm}
	
	\colorbox{codebg}{\lstinline|else:|}
	
	\subsubsection*{Functions}
	
	\colorbox{codebg}{\lstinline|def $\ \colorbox{spacebg}{\quad}$($\colorbox{spacebg}{\quad}$):|}
	
	\vspace{1mm}
	
	\colorbox{codebg}{\lstinline|\ \ \ \ return $\ \colorbox{spacebg}{\quad}$|} \\
	
	\newpage
	\vspace*{-1.5cm}
	\subsubsection*{Lists}
	
	\begin{tabular}{l l}
		Element access &
		\colorbox{codebg}{\lstinline|$\colorbox{lightspacebg}{list}$[$\colorbox{lightspacebg}{index}$]|} \vspace{1mm} \\
		
		Comprehensions &
		\colorbox{codebg}{\lstinline|[$\colorbox{spacebg}{\quad}$ for $\ \colorbox{spacebg}{\quad}$ in $\ \colorbox{spacebg}{\quad}$]|}
	\end{tabular}
	
	\subsubsection*{Common methods}
	
	list.\lstinline|append($\colorbox{lightspacebg}{item}$)| \\
	list.\lstinline|reverse()| \\
	list.\lstinline|remove($\colorbox{lightspacebg}{item}$)| \\
	
	string.\lstinline|split($\colorbox{lightspacebg}{separator}$)| \\
	string.\lstinline|capitalize()| \\
	string.\lstinline|upper()| \\
	string.\lstinline|lower()| \\
	string.\lstinline|find($\colorbox{lightspacebg}{substring}$)| \\
	
	\subsubsection*{Dictionaries}
	
	An example:
	\begin{lstlisting}
ages = {"Alice": 42, "Bob": 40}\end{lstlisting}
	Indexing:
	\begin{lstlisting}
>>> ages["Bob"]
40\end{lstlisting}
	Keys:
	\begin{lstlisting}
>>> ages.keys()
dict_keys(['Alice', 'Bob'])\end{lstlisting}
	Adding or changing items:
	\begin{lstlisting}
>>> ages.update({"Charlie": 1})\end{lstlisting}

\end{document}